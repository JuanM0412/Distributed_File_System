syntax = "proto3";

package data_node;

service DataNode {
    rpc SendFile(stream BlockChunk) returns (Reply);
    rpc GetFile(GetFileRequest) returns (stream BlockChunk);
}

message BlockChunk {
    bytes block_data = 1;
    string filename = 2;
    int32 block_number = 3;
    int32 total_blocks = 4;
    string username = 5;
}

message Reply {
    int32 length = 1;
}

message GetFileRequest {
    string filename = 1;
}